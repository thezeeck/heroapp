{"version":3,"sources":["app.js"],"names":["app","pubKey","browserDetect","obj","userAgent","navigator","toLowerCase","eventDevice","match","mobileVer","$","innerWidth","test","addClass","callApi","section","parameters","urlAjax","i","length","console","log","getJSON","apikey","api","then","data","results","fail","err","renderGrid","arrayContent","node","template","rejected","thumbnail","path","indexOf","resourceURI","extension","name","html","on","e","currentTarget","searchOptions","browser","hasClass","toggleClass","value","runGrid","submit","preventDefault","returndata","runApp"],"mappings":"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","file":"app.js","sourcesContent":["var app = {\n  \"api\": {\n    pubKey: \"e5e525c75274a0cd954ec98993d606c2\"\n  },\n  \"browser\": browserDetect()\n};\n\nfunction browserDetect() {\n  var obj = {};\n\n  obj.userAgent = navigator.userAgent.toLowerCase();\n  obj.eventDevice = obj.userAgent.match(/(iphone|ipod|ipad)/)  ? \"touchstart\" : \"click\";\n  obj.mobileVer = $(\"body\").innerWidth() < 900 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? true : false;\n\n  if (obj.mobileVer) {\n    $(\"body\").addClass(\"mobile-ver\");\n  }\n\n  return obj;\n}\n\n$(()=> {\n\n  app.callApi = (section, parameters)=> {\n    var urlAjax = \"https://gateway.marvel.com:443/v1/public/\" + section;\n\n    for (var i = 0; i < parameters.length; i++) {\n      if (i) {\n        urlAjax += \"&\" + parameters[i][0] + \"=\" + parameters[i][1];\n      } else {\n        urlAjax += \"?\" + parameters[i][0] + \"=\" + parameters[i][1]\n      }\n    }\n\n    console.log(urlAjax);\n\n    return $.getJSON(urlAjax, {\n      apikey: app.api.pubKey\n    })\n    .then((data)=> {\n      return data.data.results\n    })\n    .fail((err)=> console.log(err));\n  }\n\n  app.renderGrid = (arrayContent, node)=> {\n    console.log(arrayContent);\n    var template = \"\",\n        rejected = 0;\n    for (var i = 0; i < arrayContent.length; i++) {\n      if(arrayContent[i].thumbnail.path.indexOf(\"image_not_available\") < 0) {\n        template += `<li ui-ref=\"${arrayContent[i].resourceURI + app.api.pubKey}\"><div class=\"card\">\n                    <img src=\"${arrayContent[i].thumbnail.path}.${arrayContent[i].thumbnail.extension}\">\n                    <h3>${arrayContent[i].name}</h3></div></li>`\n      } else {\n        rejected++\n      }\n    }\n    if (rejected < arrayContent.length) {\n      $(node).html(template);\n      $(node + \" li\").on(\"click\", (e)=> {\n        console.log(e.currentTarget);\n      });\n    } else {\n      $(node).html('<h1 class=\"empty-search\">No pudimos encontrar nada</h1>');\n    }\n  }\n\n  function searchOptions() {\n\n    $(\"#serchToggle\").on(app.browser.eventDevice, ()=> {\n      if ($(\"#search\").hasClass(\"active\")) {\n        $(\"#search\").toggleClass(\"active\");\n        $(\"header\").toggleClass(\"active\");\n        $(\"#search input\")[0].value = \"\";\n        runGrid();\n      } else {\n        $(\"#search\").toggleClass(\"active\");\n        $(\"header\").toggleClass(\"active\");\n      }\n    });\n\n\n    $(\"#search\").submit((e) => {\n      e.preventDefault();\n      app.callApi(\"characters\", [\n                                  [\"nameStartsWith\", $(\"#search input\")[0].value],\n                                  [\"orderBy\", \"-modified\"],\n                                  [\"limit\", 100]\n                                ])\n        .then(\n          (returndata) => app.renderGrid(returndata, \"#gridHome\")\n      );\n    });\n  }\n\n  function runGrid() {\n    app.callApi(\"characters\", [[\"orderBy\", \"-modified\"], [\"limit\", 100]]).then(\n      (returndata)=> app.renderGrid(returndata, \"#gridHome\")\n    );\n  }\n\n  function runApp() {\n    runGrid();\n    searchOptions();\n  }\n\n  runApp();\n});\n"]}