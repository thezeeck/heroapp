{"version":3,"sources":["app.js","_api.js","_grid.js","_search.js"],"names":["app","pubKey","browserDetect","obj","userAgent","navigator","toLowerCase","eventDevice","match","mobileVer","$","innerWidth","test","addClass","runApp","runGrid","searchOptions","callApi","path","parameters","urlAjax","indexOf","i","length","console","log","getJSON","apikey","api","then","data","results","fail","err","renderGrid","arrayContent","node","template","rejected","thumbnail","extension","name","id","html","on","e","currentTarget","attr","url","returndata","browser","hasClass","toggleClass","value","submit","preventDefault"],"mappings":"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","file":"app.js","sourcesContent":["var app = {\n  \"api\": {\n    pubKey: \"e5e525c75274a0cd954ec98993d606c2\"\n  },\n  \"browser\": browserDetect()\n};\n\nfunction browserDetect() {\n  var obj = {};\n\n  obj.userAgent = navigator.userAgent.toLowerCase();\n  obj.eventDevice = obj.userAgent.match(/(iphone|ipod|ipad)/)  ? \"touchstart\" : \"click\";\n  obj.mobileVer = $(\"body\").innerWidth() < 900 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? true : false;\n\n  if(obj.mobileVer) {\n    $(\"body\").addClass(\"mobile-ver\");\n  }\n\n  return obj;\n}\n\n$(()=> {\n\n  function runApp() {\n    app.runGrid(\"characters\", [[\"orderBy\", \"-modified\"], [\"limit\", 100]], \"#gridHome\");\n    searchOptions();\n  }\n\n  runApp();\n});\n","app.callApi = (path, parameters)=> {\n  var urlAjax = path.indexOf < 0 ? path : \"https://gateway.marvel.com:443/v1/public/\" + path;\n\n  for (var i = 0; i < parameters.length; i++) {\n    if (i) {\n      urlAjax += \"&\" + parameters[i][0] + \"=\" + parameters[i][1];\n    } else {\n      urlAjax += \"?\" + parameters[i][0] + \"=\" + parameters[i][1]\n    }\n  }\n\n  console.log(urlAjax);\n\n  return $.getJSON(urlAjax, {\n    apikey: app.api.pubKey\n  })\n  .then((data)=> {\n    return data.data.results\n  })\n  .fail((err)=> console.log(err));\n}\n","app.renderGrid = (arrayContent, node)=> {\n  console.log(arrayContent);\n  var template = \"\",\n      rejected = 0;\n  for (var i = 0; i < arrayContent.length; i++) {\n    if(arrayContent[i].thumbnail.path.indexOf(\"image_not_available\") < 0) {\n      if(node === \"#detail\") {\n        template += `<div class=\"detail\">\n                    <img src=\"${arrayContent[i].thumbnail.path}.${arrayContent[i].thumbnail.extension}\">\n                    <h3>${arrayContent[i].name}</h3>\n                    <h4>Series</h4>\n                    <ul></ul>\n                    </div>`\n      } else {\n        template += `<li ui-ref=\"${arrayContent[i].id}\"><div class=\"card\">\n                    <img src=\"${arrayContent[i].thumbnail.path}.${arrayContent[i].thumbnail.extension}\">\n                    <h3>${arrayContent[i].name}</h3></div></li>`\n      }\n    } else {\n      rejected++\n    }\n  }\n  if (rejected < arrayContent.length) {\n    $(node).html(template);\n    $(node + \" li\").on(\"click\", (e)=> {\n      console.log(e.currentTarget);\n      app.runGrid(\"characters/\" + $(e.currentTarget).attr(\"ui-ref\"), [], \"#detail\");\n    });\n  } else {\n    $(node).html('<h1 class=\"empty-search\">No pudimos encontrar nada</h1>');\n  }\n}\n\napp.runGrid = (url, parameters, node)=> {\n  app.callApi(url, parameters).then(\n    (returndata)=> app.renderGrid(returndata, node)\n  );\n}\n","function searchOptions() {\n\n  $(\"#serchToggle\").on(app.browser.eventDevice, ()=> {\n    if ($(\"#search\").hasClass(\"active\")) {\n      $(\"#search\").toggleClass(\"active\");\n      $(\"header\").toggleClass(\"active\");\n      $(\"#search input\")[0].value = \"\";\n      app.runGrid(\"characters\", [[\"orderBy\", \"-modified\"], [\"limit\", 100]], \"#gridHome\");\n    } else {\n      $(\"#search\").toggleClass(\"active\");\n      $(\"header\").toggleClass(\"active\");\n    }\n  });\n\n\n  $(\"#search\").submit((e) => {\n    e.preventDefault();\n    app.callApi(\"characters\", [\n                                [\"nameStartsWith\", $(\"#search input\")[0].value],\n                                [\"orderBy\", \"-modified\"],\n                                [\"limit\", 100]\n                              ])\n      .then(\n        (returndata) => app.renderGrid(returndata, \"#gridHome\")\n    );\n  });\n}\n"]}